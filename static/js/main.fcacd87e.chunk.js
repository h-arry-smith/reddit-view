(this["webpackJsonpreddit-view"]=this["webpackJsonpreddit-view"]||[]).push([[0],{32:function(e,t,s){},39:function(e,t,s){"use strict";s.r(t);var r,c,n=s(0),i=s(1),a=s.n(i),d=s(17),o=s.n(d),l=(s(32),s(12)),j=s(4),u=s(26),b=s(3),x=s(13),h=s(11),m=s.n(h),p=s(15),O=s(10),f=function(){var e=Object(p.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.reddit.com".concat(t,".json")).then((function(e){return e.json()})).then((function(e){return e.data}));case 2:return s=e.sent,e.abrupt("return",v(s));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=[];for(var s in e.children){var r=e.children[s].data,c={id:Object(O.d)(),subreddit:r.subreddit,postHint:r.post_hint,title:r.title,score:r.score,author:r.author,url:"https://www.reddit.com/".concat(r.permalink),thumbnail:r.thumbnail,image:r.url};t.push(c)}return t},g=Object(O.b)("posts/fetchPosts",function(){var e=Object(p.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(O.c)({name:"posts",initialState:{data:[],status:"idle",subreddit:"popular",endpoint:"/r/popular/hot",searchTerm:"",error:null},reducers:{setEndpoint:function(e,t){e.endpoint=t.payload,e.status="idle",e.searchTerm=""},setSearch:function(e,t){e.endpoint="/search.json?q=".concat(t.payload),e.status="idle",e.searchTerm=t.payload},setSubreddit:function(e,t){e.subreddit=t.payload,e.endpoint="/r/".concat(e.subreddit,"/hot"),e.status="idle",e.searchTerm=""}},extraReducers:(r={},Object(x.a)(r,g.pending,(function(e,t){e.status="loading"})),Object(x.a)(r,g.fulfilled,(function(e,t){e.status="succeeded",e.data=t.payload})),Object(x.a)(r,g.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),r)}),y=w.actions,N=y.setEndpoint,k=y.setSearch,S=y.setSubreddit,C=w.reducer,T=function(e){return e.posts.data},L=function(){var e=Object(j.g)(),t=Object(b.b)(),s=Object(i.useState)(""),r=Object(u.a)(s,2),c=r[0],a=r[1];return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:function(s){s.preventDefault(),t(k(c)),a(""),e.push("/")},className:"flex items-center my-2",children:[Object(n.jsx)("label",{htmlFor:"search",className:"text-sm tracking-wide text-gray-400 uppercase",children:"search"}),Object(n.jsx)("input",{className:"w-full px-2 py-px ml-2 border rounded-md appearance-none",type:"text",id:"search",name:"search",value:c,onChange:function(e){return a(e.target.value)}})]})})},E=function(){var e=Object(b.b)();return Object(n.jsx)("div",{children:Object(n.jsxs)("select",{name:"subreddits",id:"subreddits",onChange:function(t){t.preventDefault(),e(S(t.target.value))},children:[Object(n.jsx)("option",{value:"popular",children:"Popular"}),Object(n.jsx)("option",{value:"2meirl4meirl",children:"2meirl4meirl"}),Object(n.jsx)("option",{value:"disneyvacation",children:"disneyvacation"}),Object(n.jsx)("option",{value:"unresolvedmysteries",children:"unresolvedmysteries"}),Object(n.jsx)("option",{value:"wewantplates",children:"wewantplates"}),Object(n.jsx)("option",{value:"antiMLM",children:"antiMLM"}),Object(n.jsx)("option",{value:"talesfromretail",children:"talesfromretail"}),Object(n.jsx)("option",{value:"publicfreakout",children:"publicfreakout"}),Object(n.jsx)("option",{value:"askreddit",children:"askreddit"}),Object(n.jsx)("option",{value:"unethicalLifeProTips",children:"unethicalLifeProTips"})]})})},H=function(){return Object(n.jsxs)("div",{className:"px-4 bg-white border-b-4 border-yellow-500",children:[Object(n.jsxs)("div",{className:"flex items-center justify-between w-full mt-4 text-center sm:justify-start",children:[Object(n.jsx)("div",{className:"",children:Object(n.jsx)("h1",{className:"text-3xl font-semibold",children:"RedditView"})}),Object(n.jsx)("div",{className:"mt-1 ml-4",children:Object(n.jsx)(E,{})}),Object(n.jsx)("div",{className:"w-full text-lg font-semibold text-right hover:text-yellow-600 sm:justify-self-end",children:Object(n.jsx)(l.b,{to:"/",children:"Home"})})]}),Object(n.jsx)(L,{})]})},M=function(e){var t=e.score;return Object(n.jsx)("div",{className:"flex items-center justify-end w-1/6 sm:pr-2 md:font-semibold md:text-xl",children:Object(n.jsx)("p",{id:"score",className:"text-gray-600",children:t})})},P=function(e){var t=e.post,s=e.image;return Object(n.jsxs)("div",{className:"m-4 overflow-hidden bg-white border rounded-md shadow-sm sm:p-4 sm:flex hover:shadow-md lg:max-h-40",children:[Object(n.jsx)("div",{className:"sm:w-1/6 lg:px-4",children:Object(n.jsx)("img",{src:s,className:"h-auto lg:h-full",alt:""})}),Object(n.jsxs)("div",{className:"flex w-full pl-4 mb-4",children:[Object(n.jsxs)("div",{className:"w-5/6",children:[Object(n.jsxs)("div",{className:"mt-2 text-xs tracking-wide text-gray-500 uppercase",children:[Object(n.jsxs)("span",{id:"subreddit",children:["r/",t.subreddit]}),Object(n.jsx)("span",{children:" | "}),Object(n.jsxs)("span",{id:"author",children:["u/",t.author]})]}),Object(n.jsx)("h1",{id:"title",className:"w-full text-xl font-semibold text-gray-900",children:t.title})]}),Object(n.jsx)(M,{score:t.score})]})]})},_=function(e){var t=e.post,s=e.image;return Object(n.jsxs)("div",{className:"flex p-4 m-4 bg-white border rounded-md shadow-sm hover:shadow-md lg:max-h-40",children:[Object(n.jsx)("div",{className:"sm:w-1/6",children:s}),Object(n.jsxs)("div",{class:"w-full flex",children:[Object(n.jsxs)("div",{className:"w-5/6 ml-4",children:[Object(n.jsxs)("div",{className:"text-xs tracking-wide text-gray-500 uppercase",children:[Object(n.jsxs)("span",{id:"subreddit",children:["r/",t.subreddit]}),Object(n.jsx)("span",{children:" | "}),Object(n.jsxs)("span",{id:"author",children:["u/",t.author]})]}),Object(n.jsx)("h1",{id:"title",className:"w-full text-xl font-semibold text-gray-900",children:t.title})]}),Object(n.jsx)(M,{score:t.score})]})]})},I=function(e){var t,s=e.post;switch(s.thumbnail){case"self":t=Object(n.jsx)("p",{className:"font-bold tracking-wide text-center text-gray-500 uppercase",children:"self"});break;case"nsfw":t=Object(n.jsx)("p",{className:"font-bold tracking-wide text-center text-red-700 uppercase",children:"nsfw"});break;case"default":case"":t=Object(n.jsx)("p",{});break;default:t=Object(n.jsx)("img",{src:s.thumbnail,className:"h-auto mx-auto lg:h-full",alt:""})}var r=Object(n.jsx)(_,{image:t,post:s});return"image"===s.postHint&&(r=Object(n.jsx)(P,{image:s.image,post:s})),Object(n.jsx)(l.b,{to:"/post/".concat(s.id),children:r})},R=function(){return Object(n.jsxs)("div",{className:"flex p-4 m-4 bg-gray-200 border rounded-md shadow-sm hover:shadow-md",children:[Object(n.jsx)("div",{className:"w-1/6 bg-gray-300"}),Object(n.jsxs)("div",{className:"w-4/6 ml-4",children:[Object(n.jsx)("p",{className:"text-xs tracking-wide text-gray-400 uppercase",children:"Loading..."}),Object(n.jsx)("h1",{className:"w-full text-xl font-semibold text-gray-400",children:"Loading..."})]}),Object(n.jsx)("div",{className:"flex items-center justify-center w-1/6",children:Object(n.jsx)("p",{className:"text-sm text-gray-600 uppercase",children:"Loading..."})})]})},B=function(){var e=Object(b.b)(),t=Object(b.c)(T),s=Object(b.c)((function(e){return e.posts.status})),r=Object(b.c)((function(e){return e.posts.endpoint})),c=Object(b.c)((function(e){return e.posts.error}));Object(i.useEffect)((function(){"idle"===s&&e(g(r))}),[s,e,r]);var a=Object(n.jsx)("div",{});return"loading"===s&&(a=Object(n.jsx)("div",{children:[1,2,3,4,5].map((function(e){return Object(n.jsx)(R,{},e)}))})),"succeeded"===s&&(a=Object(n.jsx)("div",{children:t.map((function(e){return Object(n.jsx)(I,{post:e},e.id)}))})),"failed"===s&&(a=Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Error!"}),Object(n.jsx)("p",{children:c})]})),Object(n.jsx)("div",{children:a})},D=function(e){var t=e.name,s=e.active,r=e.onClick;return s?Object(n.jsx)("div",{onClick:r,className:"flex items-center justify-center w-1/3 h-12 bg-white border-b-4 border-red-600",children:Object(n.jsx)("p",{className:"text-lg font-semibold tracking-wide text-red-600",children:t})}):Object(n.jsx)("div",{onClick:r,className:"flex items-center justify-center w-1/3 h-12 border-b-4 bg-gray-50 hover:border-gray-600",children:Object(n.jsx)("p",{className:"text-lg font-semibold tracking-wide text-gray-500 hover:text-gray-900",children:t})})},J=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.posts.endpoint})),s=Object(b.c)((function(e){return e.posts.subreddit})),r=function(t){e(N(t))};return Object(n.jsxs)("div",{className:"flex items-center justify-center border-t",children:[Object(n.jsx)(D,{name:"hot",active:t==="/r/".concat(s,"/hot"),onClick:function(){return r("/r/".concat(s,"/hot"))}}),Object(n.jsx)(D,{name:"top",active:t==="/r/".concat(s,"/top"),onClick:function(){return r("/r/".concat(s,"/top"))}}),Object(n.jsx)(D,{name:"new",active:t==="/r/".concat(s,"/new"),onClick:function(){return r("/r/".concat(s,"/new"))}})]})},V=function(){var e=Object(b.c)((function(e){return e.posts.searchTerm}));return""===e?Object(n.jsx)("div",{}):Object(n.jsx)("div",{className:"mx-4 mt-2 -mb-2 text-2xl font-semibold border-b",children:Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{className:"font-light text-gray-600",children:"Searched for "})," ",e]})})},W=function(){var e=Object(b.c)((function(e){return e.posts.subreddit}));return Object(n.jsx)("div",{className:"py-2 mx-4 text-2xl font-semibold",children:Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{className:"font-light text-gray-600",children:"r/"}),e]})})},q=function(){return""===Object(b.c)((function(e){return e.posts.searchTerm}))?Object(n.jsxs)("div",{className:"bg-white",children:[Object(n.jsx)(W,{}),Object(n.jsx)(J,{})]}):Object(n.jsx)("div",{children:Object(n.jsx)(V,{})})},F=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(q,{}),Object(n.jsx)(B,{})]})},$=function(e){var t=e.url;return Object(n.jsx)("a",{href:t,children:Object(n.jsx)("div",{className:"flex items-center justify-center py-1 mx-2 mt-2 -mb-4 text-sm font-semibold text-white uppercase bg-indigo-600 border-2 border-indigo-600 rounded-md shadow-sm hover:shadow-md hover:bg-white hover:text-indigo-600 hover:border-opacity-100",children:Object(n.jsx)("p",{children:"View this post on reddit."})})})},z=function(e){var t=e.comment;return Object(n.jsxs)("div",{className:"p-2 my-4 bg-white",children:[Object(n.jsxs)("div",{className:"flex justify-between text-sm tracking-wide text-gray-500 border-b",children:[Object(n.jsxs)("p",{id:"author",children:["u/",t.author]}),Object(n.jsx)("p",{id:"score",children:t.score})]}),Object(n.jsx)("div",{className:"px-2 mt-2",children:Object(n.jsx)("p",{id:"body",children:t.body})})]})},A=function(e){var t=e.comments;return 0===Object.keys(t).length?Object(n.jsx)("div",{children:"No Comments"}):Object(n.jsx)("div",{className:"",children:t.map((function(e){return Object(n.jsx)(z,{comment:e},e.id)}))})},G=function(e){var t=[];for(var s in e){var r=e[s].data,c={id:Object(O.d)(),author:r.author,body:r.body,score:r.score};t.push(c)}return t},K=Object(O.b)("detailpost/fetchPosts",function(){var e=Object(p.a)(m.a.mark((function e(t){var s,r,c,n,i,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.id,r=t.url,console.log("".concat(r,".json")),e.prev=2,e.next=5,fetch("".concat(r,".json")).then((function(e){return e.json()}));case 5:c=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{id:s,post:{},comments:{}});case 12:return n=c[0].data.children[0].data,i=c[1].data.children,a={id:s,post:{subreddit:n.subreddit,title:n.title,score:n.score,mediaOnly:n.media_only,isSelf:n.is_self,selfText:n.selftext,postHint:n.post_hint},comments:G(i)},"image"===n.post_hint?a.image=n.url:a.url=n.url,e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()),Q=Object(O.c)({name:"detailpost",initialState:{data:[],status:"idle",error:null},reducers:{},extraReducers:(c={},Object(x.a)(c,K.pending,(function(e,t){e.status="loading"})),Object(x.a)(c,K.fulfilled,(function(e,t){e.status="succeeded",e.data=t.payload})),Object(x.a)(c,K.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),c)}).reducer,U=function(e){var t=e.title,s=e.author,r=e.score,c=e.subreddit;return Object(n.jsxs)("div",{className:"px-4 py-2 m-2 bg-white rounded-md shadow-md hover:shadow-lg",children:[Object(n.jsxs)("p",{className:"mt-2 text-xs tracking-wide uppercase text-grey-500",children:["r/",c]}),Object(n.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:t}),Object(n.jsxs)("div",{className:"flex justify-between mt-4 align-baseline",children:[Object(n.jsx)("div",{className:"text-gray-500 ext-sm",children:Object(n.jsxs)("span",{children:["u/",s]})}),Object(n.jsx)("div",{children:Object(n.jsx)("span",{className:"text-lg font-semibold text-yellow-700",children:r})})]})]})},X=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.detailpost.status})),s=Object(j.h)().postId,r=Object(b.c)((function(e){return function(e,t){return e.posts.data.find((function(e){return e.id===t}))}(e,s)}));r||(r={url:"",id:"none"});var c=Object(b.c)((function(e){return e.detailpost.data}));if(Object(i.useEffect)((function(){"idle"!==t&&s===c.id||e(K({id:s,url:r.url}))}),[e,t,r.url,r.id,s,c.id]),"none"===r.id&&("idle"!==t||"loading"!==t))return Object(n.jsx)(j.a,{to:"/"});if("loading"===t||"idle"===t)return Object(n.jsx)("div",{className:"p-6 text-3xl text-gray-400",children:"Loading..."});var a=Object(n.jsx)("a",{href:c.image,children:Object(n.jsx)("img",{src:c.image,className:"w-auto mx-auto",style:{maxHeight:"40rem"},alt:""})});return Object(n.jsxs)("div",{children:[Object(n.jsx)($,{url:r.url}),Object(n.jsx)("div",{className:"my-6",children:Object(n.jsx)(U,{title:c.post.title,author:r.author,score:c.post.score,subreddit:c.post.subreddit})}),Object(n.jsx)("div",{style:{maxHeight:"80rem"},children:c.image?a:""}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{className:"mx-2 mt-4 -mb-2 text-2xl font-semibold text-gray-900 border-t",children:"Top-Level Comments"}),Object(n.jsx)(A,{comments:c.comments})]})]},r.id)};var Y=function(){return Object(n.jsx)("div",{className:"text-gray-800 bg-gray-100",children:Object(n.jsxs)(l.a,{children:[Object(n.jsx)(H,{}),Object(n.jsx)("main",{children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{path:"/post/:postId",children:Object(n.jsx)(X,{})}),Object(n.jsx)(j.b,{path:"/",children:Object(n.jsx)(F,{})})]})})]})})},Z=Object(O.a)({reducer:{posts:C,detailpost:Q}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(b.a,{store:Z,children:Object(n.jsx)(Y,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.fcacd87e.chunk.js.map